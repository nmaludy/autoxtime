name: compile

on:
  push:
    branches: ['*']
    tags:
      - v*
  pull_request:
    type: [opened, reopened, edited]
  schedule:
    # run every night at midnight
    - cron:  '0 0 * * *'

jobs:
  compile:
    name: 'compile - ${{ matrix.os }} - ${{ matrix.compiler_c }}'
    runs-on: '${{ matrix.os }}'
    strategy:
      matrix:
        include:
          - os: windows-latest
          - os: ubuntu-latest
            compiler_c: gcc
            compiler_cpp: c++
          - os: ubuntu-latest
            compiler_c: clang
            compiler_cpp: clang++
    env:
      CC: '${{ matrix.compiler_c }}'
      CXX: '${{ matrix.compiler_cpp }}'
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
      - name: CMake Setup
        run: |
          cmake -S . -B build
      - name: Compile 
        run: |
          cmake --build build
